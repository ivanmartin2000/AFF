<div class="producto-subasta">
  <h1>Productos en Subasta</h1>
  <div class="producto-card" *ngFor="let producto of productos">
    <h2>{{ producto.nombre }}</h2>
    <p>{{ producto.descripcion }}</p>
    <p><strong>Precio actual:</strong> ${{ producto.precio }}</p>
    <p><strong>Tiempo restante:</strong> {{ producto.fechaFin | countdown }}</p>
    <img *ngIf="producto.rutaImagen && producto.nombreImagen" [src]="producto.rutaImagen + producto.nombreImagen" alt="{{ producto.nombre }}" />
    <button (click)="openBidModal(producto)">Pujar</button>
  </div>
</div>

<!-- Modal para realizar puja -->
<div class="modal-overlay" *ngIf="bidModalVisible" (click)="closeBidModal()"></div>
<div class="bid-modal" *ngIf="bidModalVisible">
  <h3>Realizar Puja para {{ selectedProducto?.nombre }}</h3>
  <form [formGroup]="bidForm" (ngSubmit)="submitBid()">
    <div class="form-group">
      <label>Monto de Puja:</label>
      <input type="number" formControlName="monto" placeholder="Ingresa tu oferta">
    </div>
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
    <div class="modal-buttons">
      <button type="submit">Enviar Puja</button>
      <button type="button" (click)="closeBidModal()">Cancelar</button>
    </div>
  </form>
</div>
